#!/usr/bin/env zsh

wenv_setup() {
    WENV_DIR="$GOPATH/src/github.com/ipfs/ipfs-cluster"
    WENV_ALIASES=('ipfs' 'iptl')
    WENV_PROJECT='ipfs-cluster'
    unset WENV_BRANCH
    WENV_TASK=73

    wenv_init() { }
    wenv_shutdown() { }
}

sharness() {
    systemctl --user stop ipfs 2>/dev/null
    sudo systemctl restart docker
    docker rm ipfs 2>/dev/null
    lib_dir="$GOPATH/src/github.com/ipfs/ipfs-cluster/sharness/lib"
    if [[ ! -d "$lib_dir/sharness" ]]; then
        ln -s "$GOPATH/src/github.com/chriscool/sharness" "$lib_dir"
    fi
}
